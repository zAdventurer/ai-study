# 代码部分笔记

## NumPy 数组计算方法笔记

### 1.  数组创建方法

就像盖房子要先有砖块，NumPy 的第一步是创建数组。

#### 从列表创建数组

- `**np.array(object)**`

- - **功能**：把普通的 Python 列表变成 NumPy 的“超级数组”。
  - **案例**：

```
my_list = [1, 2, 3] arr = np.array(my_list) # 变成 [1 2 3]
```

#### 创建特殊数组

- `**np.zeros(shape, dtype=float)**` **/** `**np.ones(shape, dtype=float)**`

- - **功能**：快速创建全为 0 或全为 1 的数组。
  - **场景**：初始化一个空矩阵，或者创建一个“白板”用来存放后续计算结果。
  - **参数**：

- - - `shape`: 形状，比如 `10` (长度为10的一维数组) 或 `(2, 3)` (2行3列的矩阵)。
    - `dtype`: 数据类型，默认是小数 (`float`)，想要整数可以用 `int`。

- - **案例**：

```
z = np.zeros((3, 3), dtype=int) # 创建一个 3x3 的全0整数矩阵
```



- `**np.arange([start,] stop [, step,] dtype=None)**` 创建序列数组

- - **功能**：生成等差数列（类似 Python 的 `range`，但支持小数步长）。
  - **记忆口诀**：“含头不含尾”。
  - **参数**：

- - - `start`: 起始值，默认为 0
    - `stop`: 结束值（不包含）
    - `step`: 步长，默认为 1
    - `dtype`: 数据类型

- - 案例

```
seq = np.arange(0, 10, 2) # 结果: [0 2 4 6 8] (不包含10)
```

- `**np.linspace()**`

- - **功能**：在指定区间内生成均匀分布的数值。
  - **记忆辅助**：**Lin**ear **Space** (线性空间)。意为“在线性空间上等分”。
  - **常用参数**：

- - - `start`：起始值。
    - `stop`：结束值（通常包含）。
    - `num`：(Number) 生成多少个点。

- - 案例：

```
np.linspace(0, 10, 5) # [0, 2.5, 5, 7.5, 10]
```

- `**np.random.rand()**` **/** `**np.random.randn()**`

- - **功能**：生成随机数。
  - **记忆辅助**：

- - - **Rand**：**Rand**om (随机)。生成 [0, 1) 之间的均匀分布随机数。
    - **Randn**：**Rand**om **N**ormal (正态随机)。生成标准正态分布（均值为0，方差为1）。

- - **常用参数**：

- - - 直接传入维度数字，如 `np.random.rand(3, 4)`。

### 2. 数组索引与切片

- 精准取出你想要的数据。
- `**arr[index]**`：取某一个值。如 `arr[0]` 取第一个。
- `**arr[start:stop]**`：切片。如 `arr[1:5]` 取索引 1 到 4。
- `**arr[-n:]**`：取最后 n 个元素。

- - **案例**：`data[-2:]` 取倒数第2个到最后。

### 3. 向量化运算与广播机制

这是 NumPy 最强大的地方：不用写循环，直接对整个数组做加减乘除。

**元素级运算 (Vectorization)**

- **功能**：两个形状相同的数组，对应位置的元素直接加减乘除。
- **运算**：

- - `a + b` 元素级相加
  - `a - b` 元素级相减
  - `a * b` 元素级相乘
  - `a / b` 元素级相除

- **案例**：

```
a = np.array([10, 20]) b = np.array([1, 2]) print(a + b) # 结果: [11 22] (10+1, 20+2)
```

#### **广播机制 (Broadcasting)**

- **功能**：形状不同也能算。通常是一个数组和一个**标量**（单个数字）运算。
- **通俗理解**：自动补全。比如“全班分数 + 10 分”，就是让数组里每个数都加 10。
- **运算**：

- - `array + scalar` 数组每个元素加上标量
  - `array * scalar` 数组每个元素乘以标量
  - `array - scalar` 数组每个元素减去标量
  - `array / scalar` 数组每个元素除以标量

- **案例**：

```
a = np.array([1, 2, 3]) print(a * 10) # 结果: [10 20 30] (每个都乘10)
```

### 4. 数组形状操作

了解数组长什么样，以及怎么改变它的样子。

- `**arr.shape**`

- - **功能**：看形状。返回一个元组，告诉你有几行几列。
  - **案例**：`(2, 3)` 表示 2 行 3 列。

- `**arr.reshape(shape)**`

- - **功能**：重塑形状。就像玩橡皮泥，把一长条数组捏成方块，但**元素总数不能变**。
  - **参数**：

- - - `shape`: 新形状，可以是元组或整数
    - 支持 -1 参数，自动推导该维度大小

- - **技巧**：可以使用 `-1` 让 NumPy 自动计算某一维度的长度。
  - **案例**：

```
arr = np.arange(12)      # 0到11，共12个数 matrix = arr.reshape(3, 4) # 变成 3行4列
```

- - - - 

tip: `np.reshape(arr, newshape)` numpy.reshape 函数版本。arr 的很多方法都有对应的函数版本。

### 5. 统计函数

做数据分析时的数学工具箱。

#### 随机数生成

- `**np.random.randint(low, high=None, size=None, dtype=int)**`

- - **功能**：生成随机整数或随机数数组
  - **参数**：

- - - `low`: 最小值（包含）。
    - `high`: 最大值（**不包含**）。
    - `size`: 生成多少个，或者生成什么形状。
    - `dtype`: 数据类型

- - **案例**：

```
# 生成一个 5行5列 的矩阵，数值在 1 到 100 之间 data = np.random.randint(1, 101, size=(5, 5))
```

#### 数组统计方法

**聚合统计 (**`**sum**`**,** `**mean**`**,** `**max**`**,** `**min**`**,** `**std**`**)**

- `**array.max(axis=None)**` 返回最大值
- `**array.min(axis=None)**` 返回最小值
- `**array.mean(axis=None)**` 返回平均值
- `**array.sum(axis=None)**` 返回总和
- `**array.std(axis=None)**` 返回标准差

- **功能**：求和、平均值、最大值、最小值、标准差。
- **关键参数** `**axis**` **(轴)**：

- - `axis=None` (默认)：不管行和列，把所有数混在一起算。
  - `axis=0` (纵向)：**跨行操作**（把行折叠起来），计算**每一列**的结果。
  - `axis=1` (横向)：**跨列操作**（把列折叠起来），计算**每一行**的结果。

- **案例**：

```
scores = np.array([[80, 90], [85, 95]]) # 2个学生，每人2门课 print(scores.mean())       # 所有分数的平均分 print(scores.mean(axis=0)) # 计算每一门课的平均分 (按列算) print(scores.mean(axis=1)) # 计算每一个学生的平均分 (按行算)
```

------

## Pandas 数据分析

Pandas 就像是 Python 中的 Excel，核心是处理表格数据（DataFrame）。

### 1. 数据结构创建与读取 (Data Creation & I/O)

- `**pd.DataFrame(data)**`

- - **功能**：创建一个表格对象（DataFrame）。
  - **参数**：`data` 通常是一个字典（键是列名，值是列表）或二维数组。
  - **案例**：

```
# 就像用字典造一张表 data = {'姓名': ['小明', '小红'], '分数': [90, 95]} df = pd.DataFrame(data)
```

- `**pd.read_csv(filepath_or_buffer)**`		

- - **功能**：将 CSV 文件读取为 DataFrame。
  - **参数**：`filepath` 为文件路径（字符串）。
  - **案例**：`df = pd.read_csv('data/scores.csv')`

### 2. 数据概览与检查 (Data Inspection)

拿到数据的第一步，先给数据做个“体检”。

- `**df.head(n=5)**` **/** `**df.tail(n=5)**`

- - **功能**：查看表格的前 n 行或后 n 行。
  - **场景**：快速看看数据长什么样，列名对不对。
  - **案例**：`df.head(3)` # 看前3行

- `**df.info()**`

- - **功能**：查看数据的基本信息（索引、列名、非空值数量、数据类型）。
  - **场景**：检查有没有缺失值（空值），或者数字是不是被存成了字符串。

- `**df.describe()**`

- - **功能**：查看数值列的统计摘要（计数、均值、标准差、最小值、分位数、最大值）。
  - **场景**：快速了解数据的分布，比如分数的平均分是多少，最高分是多少。

- `**df.shape**`

- - **功能**：返回元组 `(行数, 列数)`。
  - **案例**：`rows, cols = df.shape`

### 3. 数据选择与索引 (Selection & Indexing)

怎么从大表中取出你想要的那部分数据。

- `**df['column_name']**`

- - **功能**：获取某一列（返回 Series 对象）。
  - **案例**：`names = df['姓名']`

- `**df.iloc[row_index, col_index]**`

- - **功能**：按**位置（整数索引）**选择数据。
  - **参数**：支持切片 `0:5` 或列表 `[0, 2]`。
  - **案例**：

```
first_row = df.iloc[0] # 取第一行数据
```

- **布尔索引 (Boolean Indexing)**

- - **功能**：按**条件**筛选数据。
  - **案例**：

```
good_students = df[df['分数'] >= 90] # 筛选出分数大于等于90的学生
```

### 4. 统计分析与排序 (Statistics & Sorting)

- `**df.mean()**`**,** `**df.max()**`**,** `**df.min()**`**,** `**df.std()**`

- - **功能**：计算均值、最大值、最小值、标准差。
  - **场景**：计算全班平均分、最高分等。

- `**df.groupby(by)**`

- - **功能**：分组统计。就像 Excel 的透视表，按某列（如“班级”）把数据分成几组，然后算每组的平均值等。
  - **案例**：

```
avg_score_by_city = df.groupby('城市')['分数'].mean() # 算不同城市的平均分
```

- `**df.sort_values(by, ascending=True)**`

- - **功能**：按某列的值进行排序。
  - **参数**：

- - - `by`: 依据哪一列排序。
    - `ascending`: `True` 为升序（从小到大），`False` 为降序（从大到小）。

- - **案例**：

```
top_students = df.sort_values(by='分数', ascending=False) # 按分数从高到低排
```

### 5. 数据操作 (Data Manipulation)

- `**df.apply(func)**`

- - **功能**：对数据应用自定义函数。
  - **场景**：比如根据分数自动生成“优秀/良好”的评级。
  - **案例**：

```
# 如果分数>=90就是优秀，否则是良好 df['等级'] = df['分数'].apply(lambda x: '优秀' if x >= 90 else '良好')
```

------

## Matplotlib 数据可视化 (参考 note_code4)

Matplotlib 是 Python 的画图工具，`pyplot` (通常简写为 `plt`) 是它的绘图接口。

### 1. 画布与全局设置 (Setup)

- `**plt.figure(figsize=(w, h))**`

- - **功能**：创建一张新画布。
  - **参数**：`figsize` 接受一个元组 `(宽, 高)`，单位是英寸。
  - **案例**：`plt.figure(figsize=(10, 6))` # 建一个宽10高6的大图

- `**plt.rcParams[...] = ...**`

- - **功能**：设置全局参数（如字体）。
  - **案例**：

```
plt.rcParams['font.sans-serif'] = ['SimHei'] # 让图表能显示中文 plt.rcParams['axes.unicode_minus'] = False   # 正常显示负号
```

- `**plt.style.use(style)**`

- - **功能**：使用预定义的样式表（美颜滤镜）。
  - **可选值**：`'seaborn-v0_8-darkgrid'`, `'ggplot'`, `'bmh'` 等。

### 2. 常用图表绘制 (Plotting Methods)

- `**plt.plot(x, y, ...)**` **- 折线图**

- - **场景**：看趋势（如气温变化、股票走势）。
  - **常用参数**：

- - - `label`: 图例标签（如 'sin(x)'）。
    - `color` / `c`: 线条颜色（'r'红, 'b'蓝, 'g'绿）。
    - `linestyle` / `ls`: 线型（'-'实线, '--'虚线）。
    - `marker`: 数据点标记（'o'圆点, 's'方块）。

- `**plt.scatter(x, y, ...)**` **- 散点图**

- - **场景**：看两个变量的关系（如身高和体重）。
  - **参数**：`s` (点的大小), `alpha` (透明度, 0-1之间)。

- `**plt.bar(x, height, ...)**` **- 柱状图**

- - **场景**：比较不同类别的大小（如不同水果的销量）。
  - **参数**：`width` (柱子宽度), `edgecolor` (边框颜色)。

- `**plt.hist(x, bins, ...)**` **- 直方图**

- - **场景**：看数据的分布情况（如全班分数的分布区间）。
  - **参数**：`bins` (箱子数量，即分成几组)。

- `**plt.pie(x, ...)**` **- 饼图**

- - **场景**：看占比（如各部门预算占比）。
  - **参数**：`autopct` (显示百分比格式, 如 `'%.1f%%'`), `explode` (突出的扇形)。

- `**plt.boxplot(x, ...)**` **- 箱线图**

- - **场景**：看数据的离散程度和异常值。

### 3. 图表装饰与布局 (Styling & Layout)

画完图后，给它加上标题、标签，让它更易读。

- `**plt.title(label)**`: 设置图表标题。
- `**plt.xlabel(label)**` **/** `**plt.ylabel(label)**`: 设置 X 轴和 Y 轴的名称。
- `**plt.legend()**`: 显示图例（需要绘图时指定 `label` 参数）。
- `**plt.grid(visible=True)**`: 显示网格线。
- `**plt.colorbar()**`: 显示颜色条（通常配合散点图或热力图）。
- `**plt.tight_layout()**`: 自动调整布局，防止标签被遮挡（非常实用）。
- `**plt.show()**`: **最后一步**，把画好的图显示出来。

### 4. 子图与面向对象绘图 (Subplots & Axes)

如果要在通过一张图上画好几个小图。

- `**plt.subplots(nrows, ncols, figsize=...)**`

- - **功能**：创建一个包含多个子图的画布。
  - **返回值**：`fig` (画布对象), `axes` (子图数组)。
  - **案例**：

```
fig, axes = plt.subplots(2, 2, figsize=(10, 8)) # 2行2列 # 在第一行第一列画图 axes[0, 0].plot(x, y) axes[0, 0].set_title("子图1") # 注意：子图设置标题用 set_title
```

## 
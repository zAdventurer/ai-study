数据可视化初级

### 题目一

绘制如下图形

![](./homework1.png)

要求：

* 设置背景颜色为：灰色
* 设置视图颜色为：灰色
* 设置网格线颜色：白色
* 设置网格线样式：虚线
* 函数关系如下：y = np.sin(x + i * 0.5) * (7 - i)
  * 方程中的i可以给定范围1~6，表示图片中的6条线



答案如下：

```Python
import numpy as np
import matplotlib.pyplot as plt

# 设置尺寸
plt.figure(figsize=(9,6),facecolor='gray')

# 定义函数绘制多条线形图
def sinplot():
    # 横坐标
    x = np.linspace(0,14,100)
    for i in range(1,7):
        # 根据函数关系计算纵坐标
        y = np.sin(x + i*0.5)*(7 - i)
        # 绘制线型图
        plt.plot(x, y)
# 调用函数绘制图形
sinplot()
p = plt.gca()
p.set_facecolor('gray')
plt.grid(color = 'white',ls = '--')
plt.savefig('./homework1.png',dpi = 200)
```



### 题目二：

根据提供数据，进行分组聚合运算，绘制如下图形

![](homework2.png)

要求：

* 分组聚合求各个城市春夏秋冬的PM2.5的平均值
* 对分组聚合结果进行数据重塑
* 调整行索引顺序按照：北京、上海、广州、沈阳、成都
* 调整列索引顺序：春夏秋冬
* 设置中文字体显示
* 使用DataFrame方法绘制条形图



答案如下：

```Python
import pandas as pd
import matplotlib.pyplot as plt
plt.rcParams['font.family'] = 'STKaiti'
df = pd.read_excel('./PM2.5.xlsx')
# 分组聚合求PM2.5平均值
df2 = df.groupby(by = ['城市','季节'])[['PM2.5']].mean().round(2)
# 数据重塑
df3 = df2.unstack(level = 1)
# 调整行索引顺序
df3 = df3.loc[['北京','上海','广州','沈阳','成都']]
df3.columns = df3.columns.droplevel(0)
# 调整列索引顺序
df3 = df3[list('春夏秋冬')]

df3.plot.bar(figsize = (12,9))
plt.savefig('./季节因素.png')
```

